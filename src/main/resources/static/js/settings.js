const mainBlock = document.getElementById('main-block')

export function settings() {
    const formContainer = document.createElement('div')
    formContainer.className = 'form-container'

    const input1 = document.createElement('input');
    input1.className = 'form-input'
    input1.type = 'text'
    input1.id = 'public-key'
    input1.placeholder = 'Api key...'

    const button = document.createElement('button')
    button.className = 'svg-button'
    button.id = 'save-btn'
    button.innerHTML = `
      <svg width="175" height="50" viewBox="0 0 175 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="175" height="50" rx="6" fill="url(#paint0_linear_16_438)"/>
        <path d="M65.4205 32.1989C64.483 32.1989 63.6473 32.0379 62.9134 31.7159C62.1842 31.3939 61.6042 30.9465 61.1733 30.3736C60.7472 29.7959 60.5152 29.1259 60.4773 28.3636H62.267C62.3049 28.8324 62.4659 29.2372 62.75 29.5781C63.0341 29.9143 63.4058 30.1747 63.8651 30.3594C64.3243 30.544 64.8333 30.6364 65.392 30.6364C66.017 30.6364 66.571 30.5275 67.054 30.3097C67.5369 30.0919 67.9157 29.7888 68.1903 29.4006C68.465 29.0123 68.6023 28.5625 68.6023 28.0511C68.6023 27.5161 68.4697 27.045 68.2045 26.6378C67.9394 26.2259 67.5511 25.9039 67.0398 25.6719C66.5284 25.4399 65.9034 25.3239 65.1648 25.3239H64V23.7614H65.1648C65.7424 23.7614 66.2491 23.6572 66.6847 23.4489C67.125 23.2405 67.4683 22.947 67.7145 22.5682C67.9654 22.1894 68.0909 21.7443 68.0909 21.233C68.0909 20.7405 67.982 20.312 67.7642 19.9474C67.5464 19.5829 67.2386 19.2988 66.8409 19.0952C66.4479 18.8916 65.9839 18.7898 65.4489 18.7898C64.947 18.7898 64.4735 18.8821 64.0284 19.0668C63.5881 19.2467 63.2282 19.5095 62.9489 19.8551C62.6695 20.196 62.518 20.608 62.4943 21.0909H60.7898C60.8182 20.3286 61.0478 19.661 61.4787 19.0881C61.9096 18.5104 62.473 18.0606 63.169 17.7386C63.8698 17.4167 64.6392 17.2557 65.4773 17.2557C66.3769 17.2557 67.1487 17.438 67.7926 17.8026C68.4366 18.1624 68.9313 18.6383 69.277 19.2301C69.6226 19.822 69.7955 20.4612 69.7955 21.1477C69.7955 21.9669 69.58 22.6652 69.1491 23.2429C68.723 23.8205 68.143 24.2206 67.4091 24.4432V24.5568C68.3277 24.7083 69.045 25.099 69.5611 25.7287C70.0772 26.3537 70.3352 27.1278 70.3352 28.0511C70.3352 28.8419 70.1198 29.5521 69.6889 30.1818C69.2628 30.8068 68.6804 31.2992 67.9418 31.6591C67.2031 32.0189 66.3627 32.1989 65.4205 32.1989ZM73.4957 32V17.4545H82.2741V19.017H75.2571V23.5625H78.9503C79.992 23.5625 80.8703 23.733 81.5852 24.0739C82.3049 24.4148 82.8494 24.8954 83.2188 25.5156C83.5928 26.1359 83.7798 26.8674 83.7798 27.7102C83.7798 28.553 83.5928 29.2964 83.2188 29.9403C82.8494 30.5843 82.3049 31.0885 81.5852 31.4531C80.8703 31.8177 79.992 32 78.9503 32H73.4957ZM75.2571 30.4659H78.9503C79.6132 30.4659 80.1742 30.3333 80.6335 30.0682C81.0975 29.7983 81.4479 29.4527 81.6847 29.0312C81.9261 28.6051 82.0469 28.1553 82.0469 27.6818C82.0469 26.9858 81.7794 26.3868 81.2443 25.8849C80.7093 25.3783 79.9446 25.125 78.9503 25.125H75.2571V30.4659ZM86.6793 32V17.4545H95.4577V19.017H88.4407V23.9318H95.0032V25.4943H88.4407V30.4375H95.5714V32H86.6793ZM98.6325 32V17.4545H103.547C104.688 17.4545 105.621 17.6605 106.346 18.0724C107.075 18.4796 107.614 19.0312 107.965 19.7273C108.315 20.4233 108.49 21.1998 108.49 22.0568C108.49 22.9138 108.315 23.6927 107.965 24.3935C107.619 25.0942 107.084 25.6529 106.36 26.0696C105.635 26.4815 104.707 26.6875 103.576 26.6875H100.053V25.125H103.519C104.3 25.125 104.927 24.9901 105.401 24.7202C105.874 24.4503 106.218 24.0857 106.431 23.6264C106.649 23.1624 106.757 22.6392 106.757 22.0568C106.757 21.4744 106.649 20.9536 106.431 20.4943C106.218 20.035 105.872 19.6752 105.394 19.4148C104.916 19.1496 104.281 19.017 103.49 19.017H100.394V32H98.6325ZM111.328 32V17.4545H120.106V19.017H113.089V23.9318H119.652V25.4943H113.089V30.4375H120.22V32H111.328ZM132.059 17.4545V19.017H125.042V32H123.281V17.4545H132.059ZM133.989 19.017V17.4545H144.898V19.017H140.325V32H138.563V19.017H133.989ZM147.617 17.4545H149.35V28.9034H149.492L157.446 17.4545H159.151V32H157.39V20.5795H157.248L149.321 32H147.617V17.4545Z" fill="white"/>
        <path d="M40.875 39.125H18.125C17.263 39.125 16.4364 38.7826 15.8269 38.1731C15.2174 37.5636 14.875 36.737 14.875 35.875V13.125C14.875 12.263 15.2174 11.4364 15.8269 10.8269C16.4364 10.2174 17.263 9.875 18.125 9.875H36L44.125 18V35.875C44.125 36.737 43.7826 37.5636 43.1731 38.1731C42.5636 38.7826 41.737 39.125 40.875 39.125Z" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M37.625 39.125V26.125H21.375V39.125" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <path d="M21.375 9.875V18H34.375" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <defs>
        <linearGradient id="paint0_linear_16_438" x1="42.0343" y1="28.3133" x2="168.096" y2="25.8709" gradientUnits="userSpaceOnUse">
        <stop stop-color="#860D30"/>
        <stop offset="1" stop-color="#E31F57"/>
        </linearGradient>
        </defs>
        </svg>
    `

    formContainer.appendChild(input1)
    formContainer.appendChild(button)

    mainBlock.appendChild(formContainer)

    const secondFormContainer = document.createElement('div')
    secondFormContainer.className = 'form-container'
    secondFormContainer.style.marginTop = '30px'

    const singleInput = document.createElement('input')
    singleInput.className = 'form-input'
    singleInput.type = 'text'
    singleInput.id = 'api-token'
    singleInput.placeholder = 'New password...'

    const secondButton = document.createElement('button');
    secondButton.className = 'svg-button'
    secondButton.id = 'save-token-btn'
    secondButton.innerHTML = `
      <svg width="175" height="50" viewBox="0 0 175 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="175" height="50" rx="6" fill="url(#paint0_linear_16_438)"/>
        <path d="M65.4205 32.1989C64.483 32.1989 63.6473 32.0379 62.9134 31.7159C62.1842 31.3939 61.6042 30.9465 61.1733 30.3736C60.7472 29.7959 60.5152 29.1259 60.4773 28.3636H62.267C62.3049 28.8324 62.4659 29.2372 62.75 29.5781C63.0341 29.9143 63.4058 30.1747 63.8651 30.3594C64.3243 30.544 64.8333 30.6364 65.392 30.6364C66.017 30.6364 66.571 30.5275 67.054 30.3097C67.5369 30.0919 67.9157 29.7888 68.1903 29.4006C68.465 29.0123 68.6023 28.5625 68.6023 28.0511C68.6023 27.5161 68.4697 27.045 68.2045 26.6378C67.9394 26.2259 67.5511 25.9039 67.0398 25.6719C66.5284 25.4399 65.9034 25.3239 65.1648 25.3239H64V23.7614H65.1648C65.7424 23.7614 66.2491 23.6572 66.6847 23.4489C67.125 23.2405 67.4683 22.947 67.7145 22.5682C67.9654 22.1894 68.0909 21.7443 68.0909 21.233C68.0909 20.7405 67.982 20.312 67.7642 19.9474C67.5464 19.5829 67.2386 19.2988 66.8409 19.0952C66.4479 18.8916 65.9839 18.7898 65.4489 18.7898C64.947 18.7898 64.4735 18.8821 64.0284 19.0668C63.5881 19.2467 63.2282 19.5095 62.9489 19.8551C62.6695 20.196 62.518 20.608 62.4943 21.0909H60.7898C60.8182 20.3286 61.0478 19.661 61.4787 19.0881C61.9096 18.5104 62.473 18.0606 63.169 17.7386C63.8698 17.4167 64.6392 17.2557 65.4773 17.2557C66.3769 17.2557 67.1487 17.438 67.7926 17.8026C68.4366 18.1624 68.9313 18.6383 69.277 19.2301C69.6226 19.822 69.7955 20.4612 69.7955 21.1477C69.7955 21.9669 69.58 22.6652 69.1491 23.2429C68.723 23.8205 68.143 24.2206 67.4091 24.4432V24.5568C68.3277 24.7083 69.045 25.099 69.5611 25.7287C70.0772 26.3537 70.3352 27.1278 70.3352 28.0511C70.3352 28.8419 70.1198 29.5521 69.6889 30.1818C69.2628 30.8068 68.6804 31.2992 67.9418 31.6591C67.2031 32.0189 66.3627 32.1989 65.4205 32.1989ZM73.4957 32V17.4545H82.2741V19.017H75.2571V23.5625H78.9503C79.992 23.5625 80.8703 23.733 81.5852 24.0739C82.3049 24.4148 82.8494 24.8954 83.2188 25.5156C83.5928 26.1359 83.7798 26.8674 83.7798 27.7102C83.7798 28.553 83.5928 29.2964 83.2188 29.9403C82.8494 30.5843 82.3049 31.0885 81.5852 31.4531C80.8703 31.8177 79.992 32 78.9503 32H73.4957ZM75.2571 30.4659H78.9503C79.6132 30.4659 80.1742 30.3333 80.6335 30.0682C81.0975 29.7983 81.4479 29.4527 81.6847 29.0312C81.9261 28.6051 82.0469 28.1553 82.0469 27.6818C82.0469 26.9858 81.7794 26.3868 81.2443 25.8849C80.7093 25.3783 79.9446 25.125 78.9503 25.125H75.2571V30.4659ZM86.6793 32V17.4545H95.4577V19.017H88.4407V23.9318H95.0032V25.4943H88.4407V30.4375H95.5714V32H86.6793ZM98.6325 32V17.4545H103.547C104.688 17.4545 105.621 17.6605 106.346 18.0724C107.075 18.4796 107.614 19.0312 107.965 19.7273C108.315 20.4233 108.49 21.1998 108.49 22.0568C108.49 22.9138 108.315 23.6927 107.965 24.3935C107.619 25.0942 107.084 25.6529 106.36 26.0696C105.635 26.4815 104.707 26.6875 103.576 26.6875H100.053V25.125H103.519C104.3 25.125 104.927 24.9901 105.401 24.7202C105.874 24.4503 106.218 24.0857 106.431 23.6264C106.649 23.1624 106.757 22.6392 106.757 22.0568C106.757 21.4744 106.649 20.9536 106.431 20.4943C106.218 20.035 105.872 19.6752 105.394 19.4148C104.916 19.1496 104.281 19.017 103.49 19.017H100.394V32H98.6325ZM111.328 32V17.4545H120.106V19.017H113.089V23.9318H119.652V25.4943H113.089V30.4375H120.22V32H111.328ZM132.059 17.4545V19.017H125.042V32H123.281V17.4545H132.059ZM133.989 19.017V17.4545H144.898V19.017H140.325V32H138.563V19.017H133.989ZM147.617 17.4545H149.35V28.9034H149.492L157.446 17.4545H159.151V32H157.39V20.5795H157.248L149.321 32H147.617V17.4545Z" fill="white"/>
        <path d="M40.875 39.125H18.125C17.263 39.125 16.4364 38.7826 15.8269 38.1731C15.2174 37.5636 14.875 36.737 14.875 35.875V13.125C14.875 12.263 15.2174 11.4364 15.8269 10.8269C16.4364 10.2174 17.263 9.875 18.125 9.875H36L44.125 18V35.875C44.125 36.737 43.7826 37.5636 43.1731 38.1731C42.5636 38.7826 41.737 39.125 40.875 39.125Z" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M37.625 39.125V26.125H21.375V39.125" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <path d="M21.375 9.875V18H34.375" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <defs>
        <linearGradient id="paint0_linear_16_438" x1="42.0343" y1="28.3133" x2="168.096" y2="25.8709" gradientUnits="userSpaceOnUse">
        <stop stop-color="#860D30"/>
        <stop offset="1" stop-color="#E31F57"/>
        </linearGradient>
        </defs>
        </svg>

    `

    secondFormContainer.appendChild(singleInput)
    secondFormContainer.appendChild(secondButton)

    mainBlock.appendChild(secondFormContainer)

    const thirdFormContainer = document.createElement('div')
    thirdFormContainer.className = 'form-container'
    thirdFormContainer.style.marginTop = '30px'

    const offerDelayInput = document.createElement('input');
    offerDelayInput.className = 'form-input'
    offerDelayInput.type = 'number'
    offerDelayInput.id = 'offer-delay'
    offerDelayInput.placeholder = 'Offer delay...'

    const targetDelayInput = document.createElement('input')
    targetDelayInput.className = 'form-input'
    targetDelayInput.type = 'number'
    targetDelayInput.id = 'target-delay'
    targetDelayInput.placeholder = 'Target delay...'

    const delayButton = document.createElement('button');
    delayButton.className = 'svg-button'
    delayButton.id = 'delay-save-btn'
    delayButton.innerHTML = `
     <svg width="175" height="50" viewBox="0 0 175 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="175" height="50" rx="6" fill="url(#paint0_linear_16_438)"/>
        <path d="M65.4205 32.1989C64.483 32.1989 63.6473 32.0379 62.9134 31.7159C62.1842 31.3939 61.6042 30.9465 61.1733 30.3736C60.7472 29.7959 60.5152 29.1259 60.4773 28.3636H62.267C62.3049 28.8324 62.4659 29.2372 62.75 29.5781C63.0341 29.9143 63.4058 30.1747 63.8651 30.3594C64.3243 30.544 64.8333 30.6364 65.392 30.6364C66.017 30.6364 66.571 30.5275 67.054 30.3097C67.5369 30.0919 67.9157 29.7888 68.1903 29.4006C68.465 29.0123 68.6023 28.5625 68.6023 28.0511C68.6023 27.5161 68.4697 27.045 68.2045 26.6378C67.9394 26.2259 67.5511 25.9039 67.0398 25.6719C66.5284 25.4399 65.9034 25.3239 65.1648 25.3239H64V23.7614H65.1648C65.7424 23.7614 66.2491 23.6572 66.6847 23.4489C67.125 23.2405 67.4683 22.947 67.7145 22.5682C67.9654 22.1894 68.0909 21.7443 68.0909 21.233C68.0909 20.7405 67.982 20.312 67.7642 19.9474C67.5464 19.5829 67.2386 19.2988 66.8409 19.0952C66.4479 18.8916 65.9839 18.7898 65.4489 18.7898C64.947 18.7898 64.4735 18.8821 64.0284 19.0668C63.5881 19.2467 63.2282 19.5095 62.9489 19.8551C62.6695 20.196 62.518 20.608 62.4943 21.0909H60.7898C60.8182 20.3286 61.0478 19.661 61.4787 19.0881C61.9096 18.5104 62.473 18.0606 63.169 17.7386C63.8698 17.4167 64.6392 17.2557 65.4773 17.2557C66.3769 17.2557 67.1487 17.438 67.7926 17.8026C68.4366 18.1624 68.9313 18.6383 69.277 19.2301C69.6226 19.822 69.7955 20.4612 69.7955 21.1477C69.7955 21.9669 69.58 22.6652 69.1491 23.2429C68.723 23.8205 68.143 24.2206 67.4091 24.4432V24.5568C68.3277 24.7083 69.045 25.099 69.5611 25.7287C70.0772 26.3537 70.3352 27.1278 70.3352 28.0511C70.3352 28.8419 70.1198 29.5521 69.6889 30.1818C69.2628 30.8068 68.6804 31.2992 67.9418 31.6591C67.2031 32.0189 66.3627 32.1989 65.4205 32.1989ZM73.4957 32V17.4545H82.2741V19.017H75.2571V23.5625H78.9503C79.992 23.5625 80.8703 23.733 81.5852 24.0739C82.3049 24.4148 82.8494 24.8954 83.2188 25.5156C83.5928 26.1359 83.7798 26.8674 83.7798 27.7102C83.7798 28.553 83.5928 29.2964 83.2188 29.9403C82.8494 30.5843 82.3049 31.0885 81.5852 31.4531C80.8703 31.8177 79.992 32 78.9503 32H73.4957ZM75.2571 30.4659H78.9503C79.6132 30.4659 80.1742 30.3333 80.6335 30.0682C81.0975 29.7983 81.4479 29.4527 81.6847 29.0312C81.9261 28.6051 82.0469 28.1553 82.0469 27.6818C82.0469 26.9858 81.7794 26.3868 81.2443 25.8849C80.7093 25.3783 79.9446 25.125 78.9503 25.125H75.2571V30.4659ZM86.6793 32V17.4545H95.4577V19.017H88.4407V23.9318H95.0032V25.4943H88.4407V30.4375H95.5714V32H86.6793ZM98.6325 32V17.4545H103.547C104.688 17.4545 105.621 17.6605 106.346 18.0724C107.075 18.4796 107.614 19.0312 107.965 19.7273C108.315 20.4233 108.49 21.1998 108.49 22.0568C108.49 22.9138 108.315 23.6927 107.965 24.3935C107.619 25.0942 107.084 25.6529 106.36 26.0696C105.635 26.4815 104.707 26.6875 103.576 26.6875H100.053V25.125H103.519C104.3 25.125 104.927 24.9901 105.401 24.7202C105.874 24.4503 106.218 24.0857 106.431 23.6264C106.649 23.1624 106.757 22.6392 106.757 22.0568C106.757 21.4744 106.649 20.9536 106.431 20.4943C106.218 20.035 105.872 19.6752 105.394 19.4148C104.916 19.1496 104.281 19.017 103.49 19.017H100.394V32H98.6325ZM111.328 32V17.4545H120.106V19.017H113.089V23.9318H119.652V25.4943H113.089V30.4375H120.22V32H111.328ZM132.059 17.4545V19.017H125.042V32H123.281V17.4545H132.059ZM133.989 19.017V17.4545H144.898V19.017H140.325V32H138.563V19.017H133.989ZM147.617 17.4545H149.35V28.9034H149.492L157.446 17.4545H159.151V32H157.39V20.5795H157.248L149.321 32H147.617V17.4545Z" fill="white"/>
        <path d="M40.875 39.125H18.125C17.263 39.125 16.4364 38.7826 15.8269 38.1731C15.2174 37.5636 14.875 36.737 14.875 35.875V13.125C14.875 12.263 15.2174 11.4364 15.8269 10.8269C16.4364 10.2174 17.263 9.875 18.125 9.875H36L44.125 18V35.875C44.125 36.737 43.7826 37.5636 43.1731 38.1731C42.5636 38.7826 41.737 39.125 40.875 39.125Z" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M37.625 39.125V26.125H21.375V39.125" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <path d="M21.375 9.875V18H34.375" stroke="white" stroke-width="2" stroke-linejoin="round"/>
        <defs>
        <linearGradient id="paint0_linear_16_438" x1="42.0343" y1="28.3133" x2="168.096" y2="25.8709" gradientUnits="userSpaceOnUse">
        <stop stop-color="#860D30"/>
        <stop offset="1" stop-color="#E31F57"/>
        </linearGradient>
        </defs>
        </svg>
    `
    thirdFormContainer.appendChild(offerDelayInput)
    thirdFormContainer.appendChild(targetDelayInput)
    thirdFormContainer.appendChild(delayButton)

    mainBlock.appendChild(thirdFormContainer)

    document.getElementById('delay-save-btn').addEventListener('click', () => {
        const offerDelay = document.getElementById('offer-delay').value
        const targetDelay = document.getElementById('target-delay').value

        fetch('/api/config/change-delays', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                offerDelay: offerDelay,
                targetDelay: targetDelay
            })
        }).then(response => {
            if (response.ok) {
                alert('Delays updated successfully');
            } else {
                alert('Error updating delays');
            }
        })
    })

    document.getElementById('save-btn').addEventListener('click', () => {
        const publicKey = document.getElementById('public-key').value

        fetch('/api/config/change-keys', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                publicKey: publicKey
            })
        }).then(response => {
            if (response.ok) {
                alert('Keys updated successfully');
            } else {
                alert('Error updating keys');
            }
        })
    })

    document.getElementById('save-token-btn').addEventListener('click', () => {
        const publicKey = document.getElementById('api-token').value
        fetch('/api/config/change-password', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/text'
            },
            body: publicKey
        }).then(response => {
            if (response.ok) {
                alert('Password updated successfully');
                location.reload();
            } else {
                alert('Error...');
            }
        })
    })
}